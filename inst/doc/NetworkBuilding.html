<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Jeremy Gelb" />

<meta name="date" content="2021-10-08" />

<title>Building graphs</title>

<script src="data:application/javascript;base64,Ly8gUGFuZG9jIDIuOSBhZGRzIGF0dHJpYnV0ZXMgb24gYm90aCBoZWFkZXIgYW5kIGRpdi4gV2UgcmVtb3ZlIHRoZSBmb3JtZXIgKHRvCi8vIGJlIGNvbXBhdGlibGUgd2l0aCB0aGUgYmVoYXZpb3Igb2YgUGFuZG9jIDwgMi44KS4KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKGUpIHsKICB2YXIgaHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJkaXYuc2VjdGlvbltjbGFzcyo9J2xldmVsJ10gPiA6Zmlyc3QtY2hpbGQiKTsKICB2YXIgaSwgaCwgYTsKICBmb3IgKGkgPSAwOyBpIDwgaHMubGVuZ3RoOyBpKyspIHsKICAgIGggPSBoc1tpXTsKICAgIGlmICghL15oWzEtNl0kL2kudGVzdChoLnRhZ05hbWUpKSBjb250aW51ZTsgIC8vIGl0IHNob3VsZCBiZSBhIGhlYWRlciBoMS1oNgogICAgYSA9IGguYXR0cmlidXRlczsKICAgIHdoaWxlIChhLmxlbmd0aCA+IDApIGgucmVtb3ZlQXR0cmlidXRlKGFbMF0ubmFtZSk7CiAgfQp9KTsK"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="data:text/css,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" type="text/css" />




</head>

<body>




<h1 class="title toc-ignore">Building graphs</h1>
<h4 class="author">Jeremy Gelb</h4>
<h4 class="date">2021-10-08</h4>


<div id="TOC">
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#calculating-the-nkde-density">Calculating the NKDE density</a></li>
<li><a href="#snapping-the-accidents-to-the-network">Snapping the accidents to the network</a></li>
<li><a href="#cutting-the-lines-of-the-network">Cutting the lines of the network</a></li>
<li><a href="#building-a-graph-with-the-cut-lines">Building a graph with the cut lines</a></li>
<li><a href="#calculating-for-each-node-of-the-graph-its-centrality">Calculating for each node of the graph its centrality</a></li>
</ul>
</div>

<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>The goal of this vignette is to present how several functions in <strong>spNetwork</strong> can be used to build graphs and to analyze it.</p>
<p>To illustrate the process, we give a full example with the calculation of the correlation between the centrality of bike accidents in the Montreal network and the NKDE density calculated at each accident point. Here are the steps we will follow to perform this analysis:</p>
<ol style="list-style-type: decimal">
<li>Calculating the NKDE density of accidents at each accident point</li>
<li>Snapping the accidents to the network</li>
<li>Cutting the lines of the network at the snapped accidents’ locations</li>
<li>Building a graph with the cut lines</li>
<li>Calculating for each node of the graph its centrality (betweenness)</li>
<li>Calculating the correlation between the NKDE density and the centrality measure.</li>
</ol>
<p>Let us start by loading some data.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># first load data and packages</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sp)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(maptools)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rgeos)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(spNetwork)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(raster)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tmap)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(FNN)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>networkgpkg <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">&quot;extdata&quot;</span>, <span class="st">&quot;networks.gpkg&quot;</span>,</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>                           <span class="at">package =</span> <span class="st">&quot;spNetwork&quot;</span>, <span class="at">mustWork =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>eventsgpkg <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">&quot;extdata&quot;</span>, <span class="st">&quot;events.gpkg&quot;</span>,</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>                          <span class="at">package =</span> <span class="st">&quot;spNetwork&quot;</span>, <span class="at">mustWork =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>mtl_network <span class="ot">&lt;-</span> rgdal<span class="sc">::</span><span class="fu">readOGR</span>(networkgpkg,<span class="at">layer=</span><span class="st">&quot;mtl_network&quot;</span>,<span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>bike_accidents <span class="ot">&lt;-</span> rgdal<span class="sc">::</span><span class="fu">readOGR</span>(eventsgpkg,<span class="at">layer=</span><span class="st">&quot;bike_accidents&quot;</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="co"># then plotting the data</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(mtl_network)</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(bike_accidents,<span class="at">add=</span>T,<span class="at">col=</span><span class="st">&#39;red&#39;</span>,<span class="at">pch =</span> <span class="dv">19</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>
<div id="calculating-the-nkde-density" class="section level1">
<h1>Calculating the NKDE density</h1>
<p>This step is easy to perform with the basic functions of <strong>spNetwork</strong>. For the sake of simplicity, we select an arbitrary bandwidth of 300m and use the discontinuous kernel.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># calculating the density values</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>densities <span class="ot">&lt;-</span> <span class="fu">nkde</span>(mtl_network, </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">events =</span> bike_accidents,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">w =</span> <span class="fu">rep</span>(<span class="dv">1</span>,<span class="fu">nrow</span>(bike_accidents)),</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">samples =</span> bike_accidents,</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>                  <span class="at">kernel_name =</span> <span class="st">&quot;quartic&quot;</span>,</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>                  <span class="at">bw =</span> <span class="dv">300</span>, <span class="at">div=</span> <span class="st">&quot;bw&quot;</span>, </span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>                  <span class="at">method =</span> <span class="st">&quot;discontinuous&quot;</span>, <span class="at">digits =</span> <span class="dv">2</span>, <span class="at">tol =</span> <span class="fl">0.5</span>,</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>                  <span class="at">grid_shape =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>), <span class="at">max_depth =</span> <span class="dv">8</span>,</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>                  <span class="at">agg =</span> <span class="dv">5</span>,</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>                  <span class="at">sparse =</span> <span class="cn">TRUE</span>,</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>                  <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>bike_accidents<span class="sc">$</span>density <span class="ot">&lt;-</span> densities <span class="sc">*</span> <span class="dv">1000</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="co"># mapping the density values</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(mtl_network) <span class="sc">+</span> </span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_lines</span>(<span class="at">col =</span> <span class="st">&quot;black&quot;</span>) <span class="sc">+</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(bike_accidents) <span class="sc">+</span> </span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_dots</span>(<span class="at">col =</span> <span class="st">&quot;density&quot;</span>, <span class="at">style =</span> <span class="st">&quot;kmeans&quot;</span>,</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>          <span class="at">n =</span> <span class="dv">6</span>, <span class="at">size =</span> <span class="fl">0.1</span>, <span class="at">palette =</span> <span class="st">&quot;-RdYlBu&quot;</span>)<span class="sc">+</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">legend.outside =</span> <span class="cn">TRUE</span>) </span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>
<div id="snapping-the-accidents-to-the-network" class="section level1">
<h1>Snapping the accidents to the network</h1>
<p>For this step, we will use the function <code>snapPointsToLines2</code>. It is mainly based on the function <code>snapPointsToLines</code> from <strong>maptools</strong> but can be used for bigger datasets. Note that we create two index columns: <code>OID</code> for the accidents’ location and <code>LineID</code> for the network lines.</p>
<p>We will also start by aggregating the points that are too close to each other. We will aggregate all the points that are within a 5 metres radius.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>bike_accidents<span class="sc">$</span>weight <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>agg_points <span class="ot">&lt;-</span> <span class="fu">aggregate_points</span>(bike_accidents, <span class="at">maxdist =</span> <span class="dv">5</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>agg_points<span class="sc">$</span>OID <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(agg_points)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>mtl_network<span class="sc">$</span>LineID <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(mtl_network)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>snapped_accidents <span class="ot">&lt;-</span> <span class="fu">snapPointsToLines2</span>(agg_points, </span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>                                        mtl_network,</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>                                        <span class="st">&quot;LineID&quot;</span>)</span></code></pre></div>
</div>
<div id="cutting-the-lines-of-the-network" class="section level1">
<h1>Cutting the lines of the network</h1>
<p>The next step is to use the new points to cut the lines of the network.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>new_lines <span class="ot">&lt;-</span> <span class="fu">split_lines_at_vertex</span>(mtl_network, </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>                                   snapped_accidents,</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>                                   snapped_accidents<span class="sc">$</span>nearest_line_id,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">mindist =</span> <span class="fl">0.1</span>)</span></code></pre></div>
</div>
<div id="building-a-graph-with-the-cut-lines" class="section level1">
<h1>Building a graph with the cut lines</h1>
<p>We can now build the graph from the cut lines.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>new_lines<span class="sc">$</span>OID <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(new_lines)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>new_lines<span class="sc">$</span>length <span class="ot">&lt;-</span> <span class="fu">gLength</span>(new_lines, <span class="at">byid =</span> <span class="cn">TRUE</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>graph_result <span class="ot">&lt;-</span> <span class="fu">build_graph</span>(new_lines, <span class="dv">2</span>, <span class="st">&quot;length&quot;</span>, <span class="at">attrs =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
</div>
<div id="calculating-for-each-node-of-the-graph-its-centrality" class="section level1">
<h1>Calculating for each node of the graph its centrality</h1>
<p>The graph can be used with the library <strong>igraph</strong>. We will calculate here the betweenness centrality of each node in the graph.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>btws <span class="ot">&lt;-</span> igraph<span class="sc">::</span><span class="fu">betweenness</span>(graph_result<span class="sc">$</span>graph, <span class="at">directed =</span> <span class="cn">FALSE</span>,</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>                            <span class="at">normalized =</span> <span class="cn">TRUE</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>vertices <span class="ot">&lt;-</span> graph_result<span class="sc">$</span>spvertices</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>vertices<span class="sc">$</span>btws <span class="ot">&lt;-</span> btws</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="co"># mapping the betweenness</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(vertices) <span class="sc">+</span> </span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_dots</span>(<span class="at">col =</span> <span class="st">&quot;btws&quot;</span>, <span class="at">style =</span> <span class="st">&quot;kmeans&quot;</span>,</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>          <span class="at">n =</span> <span class="dv">6</span>, <span class="at">size =</span> <span class="fl">0.1</span>, <span class="at">palette =</span> <span class="st">&quot;-RdYlBu&quot;</span>)<span class="sc">+</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">legend.outside =</span> <span class="cn">TRUE</span>) </span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>The last step is to find for each of the original points its corresponding node. We will do it by using the k nearest neighbours approach with the package <strong>FNN</strong>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># first: nn merging between snapped points and nodes</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>xy1 <span class="ot">&lt;-</span> <span class="fu">coordinates</span>(snapped_accidents)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>xy2 <span class="ot">&lt;-</span> <span class="fu">coordinates</span>(vertices)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>corr_nodes <span class="ot">&lt;-</span> <span class="fu">get.knnx</span>(xy2, xy1, <span class="at">k=</span><span class="dv">1</span>)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>snapped_accidents<span class="sc">$</span>btws <span class="ot">&lt;-</span> vertices<span class="sc">$</span>btws[corr_nodes[[<span class="dv">1</span>]]]</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co"># second: nn merging between original points and snapped points</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>xy1 <span class="ot">&lt;-</span> <span class="fu">coordinates</span>(bike_accidents)</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>xy2 <span class="ot">&lt;-</span> <span class="fu">coordinates</span>(snapped_accidents)</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>corr_nodes <span class="ot">&lt;-</span> <span class="fu">get.knnx</span>(xy2, xy1, <span class="at">k=</span><span class="dv">1</span>)</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>bike_accidents<span class="sc">$</span>btws <span class="ot">&lt;-</span> snapped_accidents<span class="sc">$</span>btws[corr_nodes[[<span class="dv">1</span>]]]</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="co"># mapping the results</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(bike_accidents) <span class="sc">+</span> </span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_dots</span>(<span class="at">col =</span> <span class="st">&quot;btws&quot;</span>, <span class="at">style =</span> <span class="st">&quot;kmeans&quot;</span>,</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>          <span class="at">n =</span> <span class="dv">6</span>, <span class="at">size =</span> <span class="fl">0.1</span>, <span class="at">palette =</span> <span class="st">&quot;-RdYlBu&quot;</span>)<span class="sc">+</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">legend.outside =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(bike_accidents) <span class="sc">+</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_dots</span>(<span class="at">col =</span> <span class="st">&quot;density&quot;</span>, <span class="at">style =</span> <span class="st">&quot;kmeans&quot;</span>,</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">n =</span> <span class="dv">6</span>, <span class="at">size =</span> <span class="fl">0.1</span>, <span class="at">palette =</span> <span class="st">&quot;-RdYlBu&quot;</span>)<span class="sc">+</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">legend.outside =</span> <span class="cn">TRUE</span>) </span></code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAeAAAAHgCAMAAABKCk6nAAAAhFBMVEUAAAAAADoAAGYAOjoAOpAAZrY6AAA6ADo6AGY6OpA6kNtmAABmADpmAGZmOpBmZjpmkJBmtv+Pw9yQOgCQOjqQOmaQkGaQtpCQ2/+2ZgC22/+2/7a2/9u2//+64O3ZNinbkDrb///m9ez5lFX+5pn/tmb/25D/27b/29v//7b//9v///88fChkAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAUZElEQVR4nO2di5acuhFF247te2Pn5XFek+R6xj22E7v///8CCGgeUklCEpQOZ69lT08PDXRt9EAF4nIj0FyO3gFSFgoGh4LBoWBwKBgcCgaHgsGhYHAoGBwKBoeCwaFgcCgYHAoGh4LBoWBwKBgcCgaHgsGhYHAoGBwKBoeCwaFgcCgYHAoGh4LBoWBwKBgcCgaHgsGhYHAoGBwKBoeCwaFgcCgYHAoGh4LBoWBwKBgcCgaHgsGhYHAoGBwKBoeCwaFgcCgYHAoGh4LBoWBwKBgcCgaHgsGhYHAoGBwKBoeCwaFgcCgYHAoGh4LBoWBwKBgcCgaHgsGhYHAoGBwKBoeCwaFgcCgYHAoGh4LBoWBwKBgcCgaHgsGhYHAoGJy74AtJ4ECFMhfLKxKN3uBRcBb0Bo+Cs6A3eFoFf/78+ehdiEFX8KYoFfz5c12GVQVvBgVnQVXwZlBwFlQFb4ZSwalt8NevX3PtSRC6gjdFq+A0vn7d2bDe4FFwFvQGj4KzoDd4mILZBo+ACt4bvcE7WPDDw8MRm80OBdt5eAAxTMF2KLg4FJyFVfC+vf7Ntez3X/55+++/yu7PHbbBWYgRfDOOd6K2XrTSI4KCM6G1Tp8F78eHy6u/N4J/frpcmh/ff/nHu8vlY6O1+dH8NL+/f3zbLPr8dr89o+AEpsH78eF98+/1bz8/Nfae33z5/u7Nl9vz69+6Yvv93cfmZ/vyW3cIfNxvzyg4gWnwutq5Edr9/PHhY+O0q5S//2pq7V5w85fb8NYue1aF4Bra4KbQ3lp1z+aC2vem5Db/PV4ubY3cC26r5/I1dHWClWIV3P689T0q061qWueuqjZv/fqf8jU0BedhVUU3/317ZbrKE8Gmyu4F//z0l/I1NAXnYd7Jett3spoi3FgeBHfijd22/W2K+qV8DU3BeXCeJjWleCzB3y7j74+t2673td+eUXACm4K3Qx+agjOxKXjP73PvhgXdgpWeFK3ZELxu/KM8mQXnNaJ1WGONxtJhyCs4sxEKTgdC8N6X2K2h4M3rC1hq94tk15xF8DG9IgoWyCl4Yvfl5SV5dcFQsEBGwZP6+eVlb8P7bcwKBYNDweAsgtcH4lt3pc74wvz/2L/540+TcQ5xyUx7Vm8brIB58PpD/ccf+qs4zAvz/7e3tx9/bN/8/vu7YPuSb778/GvyxXmFhyqPbx336dhbBTcKjSHzYvy1E/zz0+XNl+fLpRuPti7ZDlWnD1eXFbxn/9Yhcp/RMKvgprDeHttK1rwYfn02FW9j0RTWm2PJtgR/OqHgSJFHCO730SG4/78RvFhgueTj5dWfzyc4VuQhgg2uKtpUvFPBziUfk3tZ1bXB0SIPaIN7XJ2sUepYRbuWzHBJwAH54LSIHyvShT143dlO26VanPx09e6PD10n66O4pK7TpDBS60yVGcRTDHQEUk+SNwIKvpNNsH+utP2OJAqekM+vx3DQofT09JRhZyi4J2OZihTsWPjpKYthCjbkbH/jBLuWLip4c7LBjGZW2IvO2sGKaoP3FWy2JacQhGRDd+fLbUxLZNqz6gRH4SzvJdrgfmNiCkFKNvz827+N2eoEH3gSW3b+aatgOYUgJBsGs8/VVdGwhAseUwhCsuFedI8ei65rWvaCWNtgOYUgJBvugg/OB9c28X45opIN5k0h2WAE39OLefaMghOISzaY0yQh2TCeJqXff0jBWdDbgTlFG1y+744q2EKJYCau03r2nXc/zyO4xFBGhgzy6vOZ95OCD1jn2H5Q8OJVEDtepRq5zn7hSQ/QXkNTsMSul0bF+u0Wl7r4zV+KtsHX67X9IeaI/Nmk50uGibSyCz6cAMH5T+/mwbteO8NyjsibTWpHtdLnOtxD8L6FetwzsQAHCI45CKyCxRyRP5t0H9pMIXcbbF9y12bZv7UgwVHF3CpYzhH5s0nf371Knxh+h2ySgn7XksACvFVw3wbLOSJvNqlLLGq/s6FFoeAQUgQb5ByRN5vULvUtuZe1Rz748I71Nra3wT1yjsifTXrz5fao/OYz/YRbFA+poGzSPEcUlE3a7zSpkrRCLOH1sNwo6C0dgYJhEoOLr9H0hu5viGWUgnXh2N3F9+jOZ4bfZYUUfDjTPXTtr03w8IunZ76hDdYAThs8c1dAsEj9ggf0ig4SbGmD778knHoF3boyTyEIyYb2YQ/dMhnmhI8UrLiqnu/azru5CJ6ZuUJOIQjJhue35qF3399R8IQj92wevH7uGTGFICUb2reawvvzr+mT7GQRrDBxuPcuWQXLKQQx2dCPVe5fRduKyQ4D/7Hsnq0OFzymEORkQ+O9WeAAwRbSolmk0j9YcN8GyykEKdlgHl7ZPdoy355tFfxAwVHJhiGFICQbxumxNJTgRL+Fum3HtsEDYgpBSDY8DmVXjeCUPdDbLY8AZ6BjxX61ocLO+giw4N3iruA6Tndlgyd4/4q1sOC0y/DgBB8wopUgeDbibCfkC1FwWVL8eg1Pv5Drq1GwUiIFu79bcBvcP5NEzBFJt648TmYESKSeNthKUKkOEXybFeDoLzcPXv9UITlHJGSTzO0t45tJHHVVpWwmz5VwIwF+5xvPI1jMEXmySY3gg29dSUM2ExziMj3rDbWTVbCcIxKzSe3tLXvMslPsxGRqZh3PgwVvwNoGyzkiMZs0f0pLnj2zCC4Xv8maZzb9t/au1lNi96IJunVlniMSb11pK/Mdquh4wcHLzwrwaHPYYJhfJR29lpBs0iJHJGSTjPgdOlnRgrcU+V5w1xGK+nzg2ETIqpIrgpBs0iJHJN26Ym5v2eE0aUMBjg/V4LcxPPm8f0WdYLl/HFjXpzdFcAMdDrZHqj9Xnfr1rakXLBmm4NynSdmGE0NibvxSsIia20cXpsJi7h2jOrYN1oAawUvCYh43RlUOZcGboEdwnocn3Ik4iUo/mw66dWWeQhDnyep62s3yr6sdi16R6fEnIxEjyhnGcxbBM19FTiFI82R1CYkMoxw3Cm7JLrj/LmIKQUw2dAmJDKMcNwpuKSVYTiFIyYYuIfHtd+8OnMowPxF+g3wc2Aa7BM9SCEKyoU9I/O/L7bmGebJCiOoNq8kh3bG2wXIKQUg23G9aOfipK3cSIx50zcV0Y8oFG+QUgjhPVmu2XV5LCU4NOaZgOYUgzpM1nCYpuHWlo4Tgtg11tKM7+Y3YzNEdGDc6BFva4M8D8Svrr2lMJeZLoQsuUKa2C+6viEqGgotCwXkoJzj1ghqhDZbJJZhtsEh46RuXMxMfpNGuI5PfGCg4YMF+6pIkcqxjCxQcsCAFl6CQ4Kb5iqihKbgcZQTHXv5qXvjchBwyx/il4LDPuP5khkE037JKwSkf6QcyvYJzJpQjj6WzCd4wspUuOOclA7G1xekEx+MV3D5dwVeAcwm+hgie7i8F+/G0wf6MYj7B1xDBsyPy6OC5SRG8a1Y2IGWcrwB7a4vbGQTvm3f3Cc65L0HXH1BwTpotef3mNRy0T+PrcwnOf7rq13fwZTyQgl21YoEBiZW+VRHbR7DziwEKdsczTbD1s0t9lkYyn98t3wxPsFBikgQ7PrwuwMVuK3R/M6FzfSrBSW1w2NFxiGDzoEMKDsJpMbD45/JrST55BNvXgyc4rc2baFyuJ774J1QY1vSxUEM7DytAwUncBW+oCRZCU5r8uOsDhGqDguflIkawpYjPhO4neLEX01/rElzijHIhso/P9eoVvFogp+DNF4AsN1qV4CJjBtaVto1a9BDVIrbunq3M1mtrH6yzaVKwU7CvN7z+4NLvpg711qvj+92h4BW2dYZmbYS/yqtwV96JgtkGC0xik346KwoWmmcjOH77jqO/LsFlyZyL8BRgqQhvqt/tRz8F39nx6lffpvKNeFLwHXvUyzQLZktOyycUvLFwRX3M4bdYwy+U42wpi1oEb6w+02tdm+BcysP3bvu3OLPgoDVaBGcr1MFfKuE4PbHgwFVaC3C+Ihy6HLrgAm3w5qj5BOdP+Z9BcH62Ry1lCGsLIVe7u4AQvEcPO5zsgj0rlL8GguDErnJmz599D1xxbNVdLXhHtaUvQMGZx6+61QX5nW9VaNgpWJ3gDYu5Bcs1wsMJBKdVshUIFtb44JtTBkJwGvnb4PsvjrJn07Ltcn3vOTmq4C0d2fjhC98nHK1n5EiJdASeVfDGfGrAQwmjPpFHsIhvTdUKzp9P9Yd9WVkGDGkVF+yjVsGevowKwS6/29NRMZ/rdxVUcJk22Nb1bX/0V8ktt5l9SCum5A/7Cim42A1+9m3210GufOYQPDN6JsFSG5we2LgzJ5fgoANtpWz2obnSUwkWSBYcOfZhBDf/Nmx25Wy+84s/h/ptV1F5Gyyxt+Bb77cxHL2pOMGBTNdRmeCwrxvl1+Ky9Rt7e8HGGxJkwf4bpKzUK7jACaS1tHZ+43wl3HEyf2N6dG6siyh4gqM6jvS1ociHsLWxmXyKgnMIzpyRupN+nlWX4BK3GTjUxBZgrVO+VyZYKWUET+eo3bx+vcGrSXC2nPK0hprOMr39CNIbPEWCd8v9zPoYFLwX+2X3KPgQDhIc3QZb9/Lo4LmpRXBW+Skrs+/m0cFzEy243JmKx++R831PQBd80LmoQ3CxlHTsnpxKcIkjwB7W1RijWahsYQdvg/2Ct5RxvxJXAZ4JNodBSnW+tUrAEewvn/GC/RNWuj6YW/DmHDeQYC/RggNmJHV/dFlDU/CCAqdJ0QV4o2DnXN5JNbR5il7sB08lOJbrtisqijzs+xr0lMQ1FCyxrVq0C87Qgz6D4APOL6NxPW8h2fAJBNu/orZsu6MAxwi2m8Rvg62CFV9PcSdOcL67Xih4L2IL8DkFWyupOgQPBPWwLYLdB4j47WsTbKUyvwGGn2x+t8zhgSG4JoIETy/m6KHgSvjaIy5EwXUxUxNi2CL4VG3w+turZlX4LIIXSwR/Q29nu0bBtuNbM0vBfQme3juxWCR4LNt/OkXB5bEKnt/9NF8kPFsxCnZW0xS8A9YaOqtgd0erNsGd2sr8ruj0jRM/dG+t+2FhqzJ+r+4pwysTXF3hXZTeqYZx4of1hyLzyV05puBDmNe9q5p067wAw7rNCyPYvhAFl6Wg4Puqpb50ZYKra37DBG+6xGey6rGntV6qNsHV4W6DW4zgbRdxLc++7D1pvcEDEexhKMBRgnuxi7OvXvDCst7gnUNwR6RgR97BCF6WY73BO5HgyDbYlVgaCjAFV454eRcFAyBe3sU2+FzoDR4FZ0Fv8OoWPFSUARfLlh270Ru8qgUPXZ2Ay93do68bLhZdb01v8E4veMPl3pbN6Q0eBVOwYsQ2eC5OqKEpuErs5tae2QZXilVwqUy33uBRcBb0Bg9X8LTuHV9SMCSTwtz5XScOU++c1Bu8swluWd+2lHzvs97ggQqe+0oX7POvN3iYgpfC5r/1gudttGjQewDoDd45BC8Y/Fp6YZvWpzl4pxQcvEzwsnqDd7zg1A7s1pVGdazYBm8muQObsuXAt/17SMFOjhNsx7I/AbtIwU5yCM4wA+kIBecmi1/BcORkdhSsD1Fw9HSFbIPVESU4Z3V+R2/wEASL0haCc0wobUFv8CAEi9gezJIdvcHDFzxHFLzdvd7ggQn2d4dkv6s/Bvbx9QYPS3DaSbVFcOgK9QbvXILlMyYKVo/Hh++c2FpDU7AmvAU49hkNbINrIt9DOJboDR624KXPYg/80hs8aMHlSuwSvcE7keACz7Ic0Rs8ZMHXmeAiTysd0Bs8YMHXVQGmYCgWLTAFH7gXRVh2sdgGozHxW7o3rTd4uIKHOcC3PrU9Cr3BgxU8zPJ+HSm5Nb3Bo+Asl2XrDR644KZj5febwbDe4KEKfnp6GmbxlytoCq6Sfi4Oc+47E7x0TcE18jIVvPS7Npy+Qb3BgxT80gt+elr6LXXCpDd4oIJfjN/2fwpevaqe/hTJIrjUjSx6gwcpuB/F6gR3lfTwvsVvngKtN3iYglsas8bvJMewFpypytYbPFjBvVmL4NmtaBRcHf1pj1XwughTcG0MAxeD2XkWeO2TbXBljCNT9vx+oayS3uBhCu41zh4LXXQyH73BgxN8M35bw7MHf5edrklv8PAE38aWloJv0IKbRngpuMwMLDfNwatfsK0z1fttDN/fM34LGdYbvOoFT050Z30q23XQFFwhd4+zJpeCe1AFNxWype5mG1wh0xp6FLz3HLZ6g1efYEcp7K6ys54UFSu2E/QGrzrBjnZ08cSrieByDe8EvcGDFNy8nBVgCp6/Uk2A4HlppuDVK9242+DJy2l1zTZ4+ao65iMcxZ5AKaA3eAiC22tkl4Z33gW9wUMQPC+x+9u9aQ4enOAD6ueb5uBRcBb0Bq9+wdfrdVFDU/CE6gWvrpNkGzwDS/Ahclv0Bg9K8Kx63jWdpDd41Qu+LfwOgvdNGOoNXv2CR556wWZci4INdQuejVHe/bbvUrChasHzq7D6Cnp4k21wB47goQFeXHu3D3qDhyd4mVvaBb3Bq1hwUwdbauhj0Bu8egWvelEH+lUcPBDBR8pt0Rs8DMGHVs8teoNXr+DbvABTsJ2KBU+gYCcYgtkGO0EQfMSJ7wK9wQMQfMjQ1QK9waPgLOgNHgVnQW/wAASzDZZAEKwAvcGj4CzoDR4FZ0Fv8CaCSQIHKpTRu2ckCxQMDgWDQ8HgUDA4FAwOBYNDweBQMDgUDA4Fg0PB4FAwOBQMDgWDQ8HgUDA4FAwOBYNDweBQMDgUDA4Fg0PB4FAwOBQMDgWDQ8HgUDA4FAwOBYNDweBQMDgUDA4Fg0PB4FAwOBQMDgWDQ8HgUDA4FAwOBYNDweBQMDgUDA4Fg0PB4FAwOBQMDgWDQ8HgUDA4FAwOBYNDweBQMDgUDA4Fg0PB4FAwOBQMDgWDQ8HgUDA4FAwOBYNDweBQMDgUDA4Fg0PB4FAwOBQMDgWDQ8HgUDA4FAwOBYNDweBQMDgUDM7/AY1kUGCZ/bo9AAAAAElFTkSuQmCC" /><!-- --></p>
<p>And finally, we can calculate the correlation between the two variables !</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.test</span>(bike_accidents<span class="sc">$</span>density, bike_accidents<span class="sc">$</span>btws)</span></code></pre></div>
<pre><code>## 
##  Pearson&#39;s product-moment correlation
## 
## data:  bike_accidents$density and bike_accidents$btws
## t = 2.0759, df = 345, p-value = 0.03865
## alternative hypothesis: true correlation is not equal to 0
## 95 percent confidence interval:
##  0.005855796 0.213851736
## sample estimates:
##       cor 
## 0.1110699</code></pre>
<p>We can see that there is no correlation between the two variables. There is no association between the degree of centrality of an accident location in the network and the density of accidents in a radius of 300m at that location.</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
