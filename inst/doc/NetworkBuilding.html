<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Jeremy Gelb" />

<meta name="date" content="2021-10-26" />

<title>Building graphs</title>

<script src="data:application/javascript;base64,Ly8gUGFuZG9jIDIuOSBhZGRzIGF0dHJpYnV0ZXMgb24gYm90aCBoZWFkZXIgYW5kIGRpdi4gV2UgcmVtb3ZlIHRoZSBmb3JtZXIgKHRvCi8vIGJlIGNvbXBhdGlibGUgd2l0aCB0aGUgYmVoYXZpb3Igb2YgUGFuZG9jIDwgMi44KS4KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKGUpIHsKICB2YXIgaHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJkaXYuc2VjdGlvbltjbGFzcyo9J2xldmVsJ10gPiA6Zmlyc3QtY2hpbGQiKTsKICB2YXIgaSwgaCwgYTsKICBmb3IgKGkgPSAwOyBpIDwgaHMubGVuZ3RoOyBpKyspIHsKICAgIGggPSBoc1tpXTsKICAgIGlmICghL15oWzEtNl0kL2kudGVzdChoLnRhZ05hbWUpKSBjb250aW51ZTsgIC8vIGl0IHNob3VsZCBiZSBhIGhlYWRlciBoMS1oNgogICAgYSA9IGguYXR0cmlidXRlczsKICAgIHdoaWxlIChhLmxlbmd0aCA+IDApIGgucmVtb3ZlQXR0cmlidXRlKGFbMF0ubmFtZSk7CiAgfQp9KTsK"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="data:text/css,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" type="text/css" />




</head>

<body>




<h1 class="title toc-ignore">Building graphs</h1>
<h4 class="author">Jeremy Gelb</h4>
<h4 class="date">2021-10-26</h4>


<div id="TOC">
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#calculating-the-nkde-density">Calculating the NKDE density</a></li>
<li><a href="#snapping-the-accidents-to-the-network">Snapping the accidents to the network</a></li>
<li><a href="#cutting-the-lines-of-the-network">Cutting the lines of the network</a></li>
<li><a href="#building-a-graph-with-the-cut-lines">Building a graph with the cut lines</a></li>
<li><a href="#calculating-for-each-node-of-the-graph-its-centrality">Calculating for each node of the graph its centrality</a></li>
</ul>
</div>

<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>The goal of this vignette is to present how several functions in <strong>spNetwork</strong> can be used to build graphs and to analyze it.</p>
<p>To illustrate the process, we give a full example with the calculation of the correlation between the centrality of bike accidents in the Montreal network and the NKDE density calculated at each accident point. Here are the steps we will follow to perform this analysis:</p>
<ol style="list-style-type: decimal">
<li>Calculating the NKDE density of accidents at each accident point</li>
<li>Snapping the accidents to the network</li>
<li>Cutting the lines of the network at the snapped accidents’ locations</li>
<li>Building a graph with the cut lines</li>
<li>Calculating for each node of the graph its centrality (betweenness)</li>
<li>Calculating the correlation between the NKDE density and the centrality measure.</li>
</ol>
<p>Let us start by loading some data.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># first load data and packages</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sp)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(maptools)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rgeos)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(spNetwork)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(raster)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tmap)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(FNN)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>networkgpkg <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">&quot;extdata&quot;</span>, <span class="st">&quot;networks.gpkg&quot;</span>,</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>                           <span class="at">package =</span> <span class="st">&quot;spNetwork&quot;</span>, <span class="at">mustWork =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>eventsgpkg <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">&quot;extdata&quot;</span>, <span class="st">&quot;events.gpkg&quot;</span>,</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>                          <span class="at">package =</span> <span class="st">&quot;spNetwork&quot;</span>, <span class="at">mustWork =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>mtl_network <span class="ot">&lt;-</span> rgdal<span class="sc">::</span><span class="fu">readOGR</span>(networkgpkg,<span class="at">layer=</span><span class="st">&quot;mtl_network&quot;</span>,<span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>bike_accidents <span class="ot">&lt;-</span> rgdal<span class="sc">::</span><span class="fu">readOGR</span>(eventsgpkg,<span class="at">layer=</span><span class="st">&quot;bike_accidents&quot;</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="co"># then plotting the data</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(mtl_network)</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(bike_accidents,<span class="at">add=</span>T,<span class="at">col=</span><span class="st">&#39;red&#39;</span>,<span class="at">pch =</span> <span class="dv">19</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>
<div id="calculating-the-nkde-density" class="section level1">
<h1>Calculating the NKDE density</h1>
<p>This step is easy to perform with the basic functions of <strong>spNetwork</strong>. For the sake of simplicity, we select an arbitrary bandwidth of 300m and use the discontinuous kernel.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># calculating the density values</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>densities <span class="ot">&lt;-</span> <span class="fu">nkde</span>(mtl_network, </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">events =</span> bike_accidents,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">w =</span> <span class="fu">rep</span>(<span class="dv">1</span>,<span class="fu">nrow</span>(bike_accidents)),</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">samples =</span> bike_accidents,</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>                  <span class="at">kernel_name =</span> <span class="st">&quot;quartic&quot;</span>,</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>                  <span class="at">bw =</span> <span class="dv">300</span>, <span class="at">div=</span> <span class="st">&quot;bw&quot;</span>, </span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>                  <span class="at">method =</span> <span class="st">&quot;discontinuous&quot;</span>, <span class="at">digits =</span> <span class="dv">2</span>, <span class="at">tol =</span> <span class="fl">0.5</span>,</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>                  <span class="at">grid_shape =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>), <span class="at">max_depth =</span> <span class="dv">8</span>,</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>                  <span class="at">agg =</span> <span class="dv">5</span>,</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>                  <span class="at">sparse =</span> <span class="cn">TRUE</span>,</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>                  <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>bike_accidents<span class="sc">$</span>density <span class="ot">&lt;-</span> densities <span class="sc">*</span> <span class="dv">1000</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mapping the density values</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(mtl_network) <span class="sc">+</span> </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_lines</span>(<span class="at">col =</span> <span class="st">&quot;black&quot;</span>) <span class="sc">+</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(bike_accidents) <span class="sc">+</span> </span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_dots</span>(<span class="at">col =</span> <span class="st">&quot;density&quot;</span>, <span class="at">style =</span> <span class="st">&quot;kmeans&quot;</span>,</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>          <span class="at">n =</span> <span class="dv">6</span>, <span class="at">size =</span> <span class="fl">0.1</span>, <span class="at">palette =</span> <span class="st">&quot;-RdYlBu&quot;</span>)<span class="sc">+</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">legend.outside =</span> <span class="cn">TRUE</span>) </span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>
<div id="snapping-the-accidents-to-the-network" class="section level1">
<h1>Snapping the accidents to the network</h1>
<p>For this step, we will use the function <code>snapPointsToLines2</code>. It is mainly based on the function <code>snapPointsToLines</code> from <strong>maptools</strong> but can be used for bigger datasets. Note that we create two index columns: <code>OID</code> for the accidents’ location and <code>LineID</code> for the network lines.</p>
<p>We will also start by aggregating the points that are too close to each other. We will aggregate all the points that are within a 5 metres radius.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>bike_accidents<span class="sc">$</span>weight <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>agg_points <span class="ot">&lt;-</span> <span class="fu">aggregate_points</span>(bike_accidents, <span class="at">maxdist =</span> <span class="dv">5</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>agg_points<span class="sc">$</span>OID <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(agg_points)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>mtl_network<span class="sc">$</span>LineID <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(mtl_network)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>snapped_accidents <span class="ot">&lt;-</span> <span class="fu">snapPointsToLines2</span>(agg_points, </span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>                                        mtl_network,</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>                                        <span class="st">&quot;LineID&quot;</span>)</span></code></pre></div>
</div>
<div id="cutting-the-lines-of-the-network" class="section level1">
<h1>Cutting the lines of the network</h1>
<p>The next step is to use the new points to cut the lines of the network.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>new_lines <span class="ot">&lt;-</span> <span class="fu">split_lines_at_vertex</span>(mtl_network, </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>                                   snapped_accidents,</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>                                   snapped_accidents<span class="sc">$</span>nearest_line_id,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">mindist =</span> <span class="fl">0.1</span>)</span></code></pre></div>
</div>
<div id="building-a-graph-with-the-cut-lines" class="section level1">
<h1>Building a graph with the cut lines</h1>
<p>We can now build the graph from the cut lines.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>new_lines<span class="sc">$</span>OID <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(new_lines)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>new_lines<span class="sc">$</span>length <span class="ot">&lt;-</span> <span class="fu">gLength</span>(new_lines, <span class="at">byid =</span> <span class="cn">TRUE</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>graph_result <span class="ot">&lt;-</span> <span class="fu">build_graph</span>(new_lines, <span class="dv">2</span>, <span class="st">&quot;length&quot;</span>, <span class="at">attrs =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
</div>
<div id="calculating-for-each-node-of-the-graph-its-centrality" class="section level1">
<h1>Calculating for each node of the graph its centrality</h1>
<p>The graph can be used with the library <strong>igraph</strong>. We will calculate here the betweenness centrality of each node in the graph.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>btws <span class="ot">&lt;-</span> igraph<span class="sc">::</span><span class="fu">betweenness</span>(graph_result<span class="sc">$</span>graph, <span class="at">directed =</span> <span class="cn">FALSE</span>,</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>                            <span class="at">normalized =</span> <span class="cn">TRUE</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>vertices <span class="ot">&lt;-</span> graph_result<span class="sc">$</span>spvertices</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>vertices<span class="sc">$</span>btws <span class="ot">&lt;-</span> btws</span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mapping the betweenness</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(vertices) <span class="sc">+</span> </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_dots</span>(<span class="at">col =</span> <span class="st">&quot;btws&quot;</span>, <span class="at">style =</span> <span class="st">&quot;kmeans&quot;</span>,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>          <span class="at">n =</span> <span class="dv">6</span>, <span class="at">size =</span> <span class="fl">0.1</span>, <span class="at">palette =</span> <span class="st">&quot;-RdYlBu&quot;</span>)<span class="sc">+</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">legend.outside =</span> <span class="cn">TRUE</span>) </span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>The last step is to find for each of the original points its corresponding node. We will do it by using the k nearest neighbours approach with the package <strong>FNN</strong>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># first: nn merging between snapped points and nodes</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>xy1 <span class="ot">&lt;-</span> <span class="fu">coordinates</span>(snapped_accidents)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>xy2 <span class="ot">&lt;-</span> <span class="fu">coordinates</span>(vertices)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>corr_nodes <span class="ot">&lt;-</span> <span class="fu">get.knnx</span>(xy2, xy1, <span class="at">k=</span><span class="dv">1</span>)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>snapped_accidents<span class="sc">$</span>btws <span class="ot">&lt;-</span> vertices<span class="sc">$</span>btws[corr_nodes[[<span class="dv">1</span>]]]</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co"># second: nn merging between original points and snapped points</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>xy1 <span class="ot">&lt;-</span> <span class="fu">coordinates</span>(bike_accidents)</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>xy2 <span class="ot">&lt;-</span> <span class="fu">coordinates</span>(snapped_accidents)</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>corr_nodes <span class="ot">&lt;-</span> <span class="fu">get.knnx</span>(xy2, xy1, <span class="at">k=</span><span class="dv">1</span>)</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>bike_accidents<span class="sc">$</span>btws <span class="ot">&lt;-</span> snapped_accidents<span class="sc">$</span>btws[corr_nodes[[<span class="dv">1</span>]]]</span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mapping the results</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(bike_accidents) <span class="sc">+</span> </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_dots</span>(<span class="at">col =</span> <span class="st">&quot;btws&quot;</span>, <span class="at">style =</span> <span class="st">&quot;kmeans&quot;</span>,</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>          <span class="at">n =</span> <span class="dv">6</span>, <span class="at">size =</span> <span class="fl">0.1</span>, <span class="at">palette =</span> <span class="st">&quot;-RdYlBu&quot;</span>)<span class="sc">+</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">legend.outside =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(bike_accidents) <span class="sc">+</span> </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_dots</span>(<span class="at">col =</span> <span class="st">&quot;density&quot;</span>, <span class="at">style =</span> <span class="st">&quot;kmeans&quot;</span>,</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">n =</span> <span class="dv">6</span>, <span class="at">size =</span> <span class="fl">0.1</span>, <span class="at">palette =</span> <span class="st">&quot;-RdYlBu&quot;</span>)<span class="sc">+</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">legend.outside =</span> <span class="cn">TRUE</span>) </span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>And finally, we can calculate the correlation between the two variables !</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.test</span>(bike_accidents<span class="sc">$</span>density, bike_accidents<span class="sc">$</span>btws)</span></code></pre></div>
<pre><code>## 
##  Pearson&#39;s product-moment correlation
## 
## data:  bike_accidents$density and bike_accidents$btws
## t = 2.0932, df = 345, p-value = 0.03707
## alternative hypothesis: true correlation is not equal to 0
## 95 percent confidence interval:
##  0.006780255 0.214733777
## sample estimates:
##       cor 
## 0.1119829</code></pre>
<p>We can see that there is no correlation between the two variables. There is no association between the degree of centrality of an accident location in the network and the density of accidents in a radius of 300m at that location.</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
